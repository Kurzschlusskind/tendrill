# Tendrill MQTT Broker Configuration
# Eclipse Mosquitto 2.x

# =============================================================================
# Listeners
# =============================================================================

# Standard MQTT Port
listener 1883
protocol mqtt

# WebSocket Support (für Browser-Clients)
listener 9001
protocol websockets

# =============================================================================
# Security
# =============================================================================

# Authentifizierung erforderlich
allow_anonymous false
password_file /mosquitto/config/password.txt

# =============================================================================
# Persistence
# =============================================================================

persistence true
persistence_location /mosquitto/data/

# =============================================================================
# Logging
# =============================================================================

log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# =============================================================================
# Connection Settings
# =============================================================================

# Max Inflight Messages
max_inflight_messages 100

# Message Size Limit (256KB)
message_size_limit 262144

# Keepalive
max_keepalive 120

# =============================================================================
# Topic Settings
# =============================================================================

# Retained Messages erlauben
retain_available true

# Auto-Expiry für retained messages (7 Tage)
# message_expiry_interval 604800
